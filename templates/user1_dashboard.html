<!DOCTYPE html>
<html>
<head>
  <title>ユーザーダッシュボード</title>
  <script>
    function showAlert() {
      alert('更新しました Updated');
    }
  </script>
  <style>
    .participant-actions {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <img alt="Logo" src="{{ url_for('static', filename='logo.png') }}" style="position: absolute; top: 20px; left: 20px;" />
  <h2 style="margin-top: 100px;">参加者お一人ずつについて下記の事項を入力して追加ボタンをクリックしてください</h2>
  <h2 style="margin-top: 0px;">Please input the following information for each participant individually, then click the "Add" button.</h2>

  <form method="POST">
    <label>役職 (Title): <input name="position" required type="text" /></label><br/>
    <label>氏名 (Name): <input name="name" required type="text" /></label><br/>
    <label>メールアドレス (Email Address): <input name="email" required type="email" /></label><br/>
    <label>ご質問・ご要望など (Questions or Requests): <textarea name="questions"></textarea></label><br/>
    <label>出欠 (Attendance): 
      <select name="agm_status">
        <option value="出席">AGM出席 (Present)</option>
        <option value="欠席">AGM欠席 (Absent)</option>
      </select>
    </label><br/>
    <button type="submit">追加 (Add)</button>
  </form>

  <h2>参加者一覧（更新/削除が可能です）</h2>
  <ul>
    {% for p in participants %}
    <li>
      <form action="{{ url_for('update_participant', participant_id=p.id) }}" method="POST">
        <input type="text" name="position" value="{{ p.position }}" placeholder="役職">
        <input type="text" name="name" value="{{ p.name }}" placeholder="氏名">
        <input type="email" name="email" value="{{ p.email }}" placeholder="メールアドレス">
        <textarea name="questions" placeholder="ご質問・ご要望">{{ p.questions }}</textarea>
        <select name="agm_status">
          <option value="出席" {% if p.agm_status == '出席' %}selected{% endif %}>AGM出席</option>
          <option value="欠席" {% if p.agm_status == '欠席' %}selected{% endif %}>AGM欠席</option>
        </select>
        <div class="participant-actions">
          <button onclick="showAlert()" type="submit">更新 (Update)</button>
      </form>
      <form action="{{ url_for('delete_participant', participant_id=p.id) }}" method="POST">
          <button onclick="return confirm('本当に削除しますか？');" type="submit">削除 (Delete)</button>
        </form>
        </div>
    </li>
    {% endfor %}
  </ul>

  <a href="{{ url_for('logout') }}">ログアウト（Logout）</a>
</body>
</html>
